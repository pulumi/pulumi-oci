// Code generated by pulumi-language-go DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package networkloadbalancer

import (
	"context"
	"reflect"

	"errors"
	"github.com/pulumi/pulumi-oci/sdk/v3/go/oci/internal"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// This resource provides the Listener resource in Oracle Cloud Infrastructure Network Load Balancer service.
//
// Adds a listener to a network load balancer.
//
// ## Example Usage
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi-oci/sdk/v3/go/oci/networkloadbalancer"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			_, err := networkloadbalancer.NewListener(ctx, "test_listener", &networkloadbalancer.ListenerArgs{
//				DefaultBackendSetName: pulumi.Any(testBackendSet.Name),
//				Name:                  pulumi.Any(listenerName),
//				NetworkLoadBalancerId: pulumi.Any(testNetworkLoadBalancer.Id),
//				Port:                  pulumi.Any(listenerPort),
//				Protocol:              pulumi.Any(listenerProtocol),
//				IpVersion:             pulumi.Any(listenerIpVersion),
//				IsPpv2enabled:         pulumi.Any(listenerIsPpv2enabled),
//				L3ipIdleTimeout:       pulumi.Any(listenerL3ipIdleTimeout),
//				TcpIdleTimeout:        pulumi.Any(listenerTcpIdleTimeout),
//				UdpIdleTimeout:        pulumi.Any(listenerUdpIdleTimeout),
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
//
// ## Import
//
// Listeners can be imported using the `id`, e.g.
//
// ```sh
// $ pulumi import oci:NetworkLoadBalancer/listener:Listener test_listener "networkLoadBalancers/{networkLoadBalancerId}/listeners/{listenerName}"
// ```
type Listener struct {
	pulumi.CustomResourceState

	// (Updatable) The name of the associated backend set.  Example: `exampleBackendSet`
	DefaultBackendSetName pulumi.StringOutput `pulumi:"defaultBackendSetName"`
	// (Updatable) IP version associated with the listener.
	IpVersion pulumi.StringOutput `pulumi:"ipVersion"`
	// (Updatable) Property to enable/disable PPv2 feature for this listener.
	IsPpv2enabled pulumi.BoolOutput `pulumi:"isPpv2enabled"`
	// (Updatable) The duration for L3IP idle timeout in seconds. Example: `200`
	L3ipIdleTimeout pulumi.IntOutput `pulumi:"l3ipIdleTimeout"`
	// A friendly name for the listener. It must be unique and it cannot be changed.  Example: `exampleListener`
	Name pulumi.StringOutput `pulumi:"name"`
	// The [OCID](https://docs.cloud.oracle.com/iaas/Content/General/Concepts/identifiers.htm) of the network load balancer to update.
	NetworkLoadBalancerId pulumi.StringOutput `pulumi:"networkLoadBalancerId"`
	// (Updatable) The communication port for the listener.  Example: `80`
	Port pulumi.IntOutput `pulumi:"port"`
	// (Updatable) The protocol on which the listener accepts connection requests. For public network load balancers, ANY protocol refers to TCP/UDP with the wildcard port. For private network load balancers, ANY protocol refers to TCP/UDP/ICMP (note that ICMP requires isPreserveSourceDestination to be set to true). "ListNetworkLoadBalancersProtocols" API is deprecated and it will not return the updated values. Use the allowed values for the protocol instead.  Example: `TCP`
	Protocol pulumi.StringOutput `pulumi:"protocol"`
	// (Updatable) The duration for TCP idle timeout in seconds. Example: `300`
	TcpIdleTimeout pulumi.IntOutput `pulumi:"tcpIdleTimeout"`
	// (Updatable) The duration for UDP idle timeout in seconds. Example: `120`
	//
	// ** IMPORTANT **
	// Any change to a property that does not support update will force the destruction and recreation of the resource with the new property values
	UdpIdleTimeout pulumi.IntOutput `pulumi:"udpIdleTimeout"`
}

// NewListener registers a new resource with the given unique name, arguments, and options.
func NewListener(ctx *pulumi.Context,
	name string, args *ListenerArgs, opts ...pulumi.ResourceOption) (*Listener, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.DefaultBackendSetName == nil {
		return nil, errors.New("invalid value for required argument 'DefaultBackendSetName'")
	}
	if args.NetworkLoadBalancerId == nil {
		return nil, errors.New("invalid value for required argument 'NetworkLoadBalancerId'")
	}
	if args.Port == nil {
		return nil, errors.New("invalid value for required argument 'Port'")
	}
	if args.Protocol == nil {
		return nil, errors.New("invalid value for required argument 'Protocol'")
	}
	opts = internal.PkgResourceDefaultOpts(opts)
	var resource Listener
	err := ctx.RegisterResource("oci:NetworkLoadBalancer/listener:Listener", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetListener gets an existing Listener resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetListener(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *ListenerState, opts ...pulumi.ResourceOption) (*Listener, error) {
	var resource Listener
	err := ctx.ReadResource("oci:NetworkLoadBalancer/listener:Listener", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering Listener resources.
type listenerState struct {
	// (Updatable) The name of the associated backend set.  Example: `exampleBackendSet`
	DefaultBackendSetName *string `pulumi:"defaultBackendSetName"`
	// (Updatable) IP version associated with the listener.
	IpVersion *string `pulumi:"ipVersion"`
	// (Updatable) Property to enable/disable PPv2 feature for this listener.
	IsPpv2enabled *bool `pulumi:"isPpv2enabled"`
	// (Updatable) The duration for L3IP idle timeout in seconds. Example: `200`
	L3ipIdleTimeout *int `pulumi:"l3ipIdleTimeout"`
	// A friendly name for the listener. It must be unique and it cannot be changed.  Example: `exampleListener`
	Name *string `pulumi:"name"`
	// The [OCID](https://docs.cloud.oracle.com/iaas/Content/General/Concepts/identifiers.htm) of the network load balancer to update.
	NetworkLoadBalancerId *string `pulumi:"networkLoadBalancerId"`
	// (Updatable) The communication port for the listener.  Example: `80`
	Port *int `pulumi:"port"`
	// (Updatable) The protocol on which the listener accepts connection requests. For public network load balancers, ANY protocol refers to TCP/UDP with the wildcard port. For private network load balancers, ANY protocol refers to TCP/UDP/ICMP (note that ICMP requires isPreserveSourceDestination to be set to true). "ListNetworkLoadBalancersProtocols" API is deprecated and it will not return the updated values. Use the allowed values for the protocol instead.  Example: `TCP`
	Protocol *string `pulumi:"protocol"`
	// (Updatable) The duration for TCP idle timeout in seconds. Example: `300`
	TcpIdleTimeout *int `pulumi:"tcpIdleTimeout"`
	// (Updatable) The duration for UDP idle timeout in seconds. Example: `120`
	//
	// ** IMPORTANT **
	// Any change to a property that does not support update will force the destruction and recreation of the resource with the new property values
	UdpIdleTimeout *int `pulumi:"udpIdleTimeout"`
}

type ListenerState struct {
	// (Updatable) The name of the associated backend set.  Example: `exampleBackendSet`
	DefaultBackendSetName pulumi.StringPtrInput
	// (Updatable) IP version associated with the listener.
	IpVersion pulumi.StringPtrInput
	// (Updatable) Property to enable/disable PPv2 feature for this listener.
	IsPpv2enabled pulumi.BoolPtrInput
	// (Updatable) The duration for L3IP idle timeout in seconds. Example: `200`
	L3ipIdleTimeout pulumi.IntPtrInput
	// A friendly name for the listener. It must be unique and it cannot be changed.  Example: `exampleListener`
	Name pulumi.StringPtrInput
	// The [OCID](https://docs.cloud.oracle.com/iaas/Content/General/Concepts/identifiers.htm) of the network load balancer to update.
	NetworkLoadBalancerId pulumi.StringPtrInput
	// (Updatable) The communication port for the listener.  Example: `80`
	Port pulumi.IntPtrInput
	// (Updatable) The protocol on which the listener accepts connection requests. For public network load balancers, ANY protocol refers to TCP/UDP with the wildcard port. For private network load balancers, ANY protocol refers to TCP/UDP/ICMP (note that ICMP requires isPreserveSourceDestination to be set to true). "ListNetworkLoadBalancersProtocols" API is deprecated and it will not return the updated values. Use the allowed values for the protocol instead.  Example: `TCP`
	Protocol pulumi.StringPtrInput
	// (Updatable) The duration for TCP idle timeout in seconds. Example: `300`
	TcpIdleTimeout pulumi.IntPtrInput
	// (Updatable) The duration for UDP idle timeout in seconds. Example: `120`
	//
	// ** IMPORTANT **
	// Any change to a property that does not support update will force the destruction and recreation of the resource with the new property values
	UdpIdleTimeout pulumi.IntPtrInput
}

func (ListenerState) ElementType() reflect.Type {
	return reflect.TypeOf((*listenerState)(nil)).Elem()
}

type listenerArgs struct {
	// (Updatable) The name of the associated backend set.  Example: `exampleBackendSet`
	DefaultBackendSetName string `pulumi:"defaultBackendSetName"`
	// (Updatable) IP version associated with the listener.
	IpVersion *string `pulumi:"ipVersion"`
	// (Updatable) Property to enable/disable PPv2 feature for this listener.
	IsPpv2enabled *bool `pulumi:"isPpv2enabled"`
	// (Updatable) The duration for L3IP idle timeout in seconds. Example: `200`
	L3ipIdleTimeout *int `pulumi:"l3ipIdleTimeout"`
	// A friendly name for the listener. It must be unique and it cannot be changed.  Example: `exampleListener`
	Name *string `pulumi:"name"`
	// The [OCID](https://docs.cloud.oracle.com/iaas/Content/General/Concepts/identifiers.htm) of the network load balancer to update.
	NetworkLoadBalancerId string `pulumi:"networkLoadBalancerId"`
	// (Updatable) The communication port for the listener.  Example: `80`
	Port int `pulumi:"port"`
	// (Updatable) The protocol on which the listener accepts connection requests. For public network load balancers, ANY protocol refers to TCP/UDP with the wildcard port. For private network load balancers, ANY protocol refers to TCP/UDP/ICMP (note that ICMP requires isPreserveSourceDestination to be set to true). "ListNetworkLoadBalancersProtocols" API is deprecated and it will not return the updated values. Use the allowed values for the protocol instead.  Example: `TCP`
	Protocol string `pulumi:"protocol"`
	// (Updatable) The duration for TCP idle timeout in seconds. Example: `300`
	TcpIdleTimeout *int `pulumi:"tcpIdleTimeout"`
	// (Updatable) The duration for UDP idle timeout in seconds. Example: `120`
	//
	// ** IMPORTANT **
	// Any change to a property that does not support update will force the destruction and recreation of the resource with the new property values
	UdpIdleTimeout *int `pulumi:"udpIdleTimeout"`
}

// The set of arguments for constructing a Listener resource.
type ListenerArgs struct {
	// (Updatable) The name of the associated backend set.  Example: `exampleBackendSet`
	DefaultBackendSetName pulumi.StringInput
	// (Updatable) IP version associated with the listener.
	IpVersion pulumi.StringPtrInput
	// (Updatable) Property to enable/disable PPv2 feature for this listener.
	IsPpv2enabled pulumi.BoolPtrInput
	// (Updatable) The duration for L3IP idle timeout in seconds. Example: `200`
	L3ipIdleTimeout pulumi.IntPtrInput
	// A friendly name for the listener. It must be unique and it cannot be changed.  Example: `exampleListener`
	Name pulumi.StringPtrInput
	// The [OCID](https://docs.cloud.oracle.com/iaas/Content/General/Concepts/identifiers.htm) of the network load balancer to update.
	NetworkLoadBalancerId pulumi.StringInput
	// (Updatable) The communication port for the listener.  Example: `80`
	Port pulumi.IntInput
	// (Updatable) The protocol on which the listener accepts connection requests. For public network load balancers, ANY protocol refers to TCP/UDP with the wildcard port. For private network load balancers, ANY protocol refers to TCP/UDP/ICMP (note that ICMP requires isPreserveSourceDestination to be set to true). "ListNetworkLoadBalancersProtocols" API is deprecated and it will not return the updated values. Use the allowed values for the protocol instead.  Example: `TCP`
	Protocol pulumi.StringInput
	// (Updatable) The duration for TCP idle timeout in seconds. Example: `300`
	TcpIdleTimeout pulumi.IntPtrInput
	// (Updatable) The duration for UDP idle timeout in seconds. Example: `120`
	//
	// ** IMPORTANT **
	// Any change to a property that does not support update will force the destruction and recreation of the resource with the new property values
	UdpIdleTimeout pulumi.IntPtrInput
}

func (ListenerArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*listenerArgs)(nil)).Elem()
}

type ListenerInput interface {
	pulumi.Input

	ToListenerOutput() ListenerOutput
	ToListenerOutputWithContext(ctx context.Context) ListenerOutput
}

func (*Listener) ElementType() reflect.Type {
	return reflect.TypeOf((**Listener)(nil)).Elem()
}

func (i *Listener) ToListenerOutput() ListenerOutput {
	return i.ToListenerOutputWithContext(context.Background())
}

func (i *Listener) ToListenerOutputWithContext(ctx context.Context) ListenerOutput {
	return pulumi.ToOutputWithContext(ctx, i).(ListenerOutput)
}

// ListenerArrayInput is an input type that accepts ListenerArray and ListenerArrayOutput values.
// You can construct a concrete instance of `ListenerArrayInput` via:
//
//	ListenerArray{ ListenerArgs{...} }
type ListenerArrayInput interface {
	pulumi.Input

	ToListenerArrayOutput() ListenerArrayOutput
	ToListenerArrayOutputWithContext(context.Context) ListenerArrayOutput
}

type ListenerArray []ListenerInput

func (ListenerArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*Listener)(nil)).Elem()
}

func (i ListenerArray) ToListenerArrayOutput() ListenerArrayOutput {
	return i.ToListenerArrayOutputWithContext(context.Background())
}

func (i ListenerArray) ToListenerArrayOutputWithContext(ctx context.Context) ListenerArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(ListenerArrayOutput)
}

// ListenerMapInput is an input type that accepts ListenerMap and ListenerMapOutput values.
// You can construct a concrete instance of `ListenerMapInput` via:
//
//	ListenerMap{ "key": ListenerArgs{...} }
type ListenerMapInput interface {
	pulumi.Input

	ToListenerMapOutput() ListenerMapOutput
	ToListenerMapOutputWithContext(context.Context) ListenerMapOutput
}

type ListenerMap map[string]ListenerInput

func (ListenerMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*Listener)(nil)).Elem()
}

func (i ListenerMap) ToListenerMapOutput() ListenerMapOutput {
	return i.ToListenerMapOutputWithContext(context.Background())
}

func (i ListenerMap) ToListenerMapOutputWithContext(ctx context.Context) ListenerMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(ListenerMapOutput)
}

type ListenerOutput struct{ *pulumi.OutputState }

func (ListenerOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**Listener)(nil)).Elem()
}

func (o ListenerOutput) ToListenerOutput() ListenerOutput {
	return o
}

func (o ListenerOutput) ToListenerOutputWithContext(ctx context.Context) ListenerOutput {
	return o
}

// (Updatable) The name of the associated backend set.  Example: `exampleBackendSet`
func (o ListenerOutput) DefaultBackendSetName() pulumi.StringOutput {
	return o.ApplyT(func(v *Listener) pulumi.StringOutput { return v.DefaultBackendSetName }).(pulumi.StringOutput)
}

// (Updatable) IP version associated with the listener.
func (o ListenerOutput) IpVersion() pulumi.StringOutput {
	return o.ApplyT(func(v *Listener) pulumi.StringOutput { return v.IpVersion }).(pulumi.StringOutput)
}

// (Updatable) Property to enable/disable PPv2 feature for this listener.
func (o ListenerOutput) IsPpv2enabled() pulumi.BoolOutput {
	return o.ApplyT(func(v *Listener) pulumi.BoolOutput { return v.IsPpv2enabled }).(pulumi.BoolOutput)
}

// (Updatable) The duration for L3IP idle timeout in seconds. Example: `200`
func (o ListenerOutput) L3ipIdleTimeout() pulumi.IntOutput {
	return o.ApplyT(func(v *Listener) pulumi.IntOutput { return v.L3ipIdleTimeout }).(pulumi.IntOutput)
}

// A friendly name for the listener. It must be unique and it cannot be changed.  Example: `exampleListener`
func (o ListenerOutput) Name() pulumi.StringOutput {
	return o.ApplyT(func(v *Listener) pulumi.StringOutput { return v.Name }).(pulumi.StringOutput)
}

// The [OCID](https://docs.cloud.oracle.com/iaas/Content/General/Concepts/identifiers.htm) of the network load balancer to update.
func (o ListenerOutput) NetworkLoadBalancerId() pulumi.StringOutput {
	return o.ApplyT(func(v *Listener) pulumi.StringOutput { return v.NetworkLoadBalancerId }).(pulumi.StringOutput)
}

// (Updatable) The communication port for the listener.  Example: `80`
func (o ListenerOutput) Port() pulumi.IntOutput {
	return o.ApplyT(func(v *Listener) pulumi.IntOutput { return v.Port }).(pulumi.IntOutput)
}

// (Updatable) The protocol on which the listener accepts connection requests. For public network load balancers, ANY protocol refers to TCP/UDP with the wildcard port. For private network load balancers, ANY protocol refers to TCP/UDP/ICMP (note that ICMP requires isPreserveSourceDestination to be set to true). "ListNetworkLoadBalancersProtocols" API is deprecated and it will not return the updated values. Use the allowed values for the protocol instead.  Example: `TCP`
func (o ListenerOutput) Protocol() pulumi.StringOutput {
	return o.ApplyT(func(v *Listener) pulumi.StringOutput { return v.Protocol }).(pulumi.StringOutput)
}

// (Updatable) The duration for TCP idle timeout in seconds. Example: `300`
func (o ListenerOutput) TcpIdleTimeout() pulumi.IntOutput {
	return o.ApplyT(func(v *Listener) pulumi.IntOutput { return v.TcpIdleTimeout }).(pulumi.IntOutput)
}

// (Updatable) The duration for UDP idle timeout in seconds. Example: `120`
//
// ** IMPORTANT **
// Any change to a property that does not support update will force the destruction and recreation of the resource with the new property values
func (o ListenerOutput) UdpIdleTimeout() pulumi.IntOutput {
	return o.ApplyT(func(v *Listener) pulumi.IntOutput { return v.UdpIdleTimeout }).(pulumi.IntOutput)
}

type ListenerArrayOutput struct{ *pulumi.OutputState }

func (ListenerArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*Listener)(nil)).Elem()
}

func (o ListenerArrayOutput) ToListenerArrayOutput() ListenerArrayOutput {
	return o
}

func (o ListenerArrayOutput) ToListenerArrayOutputWithContext(ctx context.Context) ListenerArrayOutput {
	return o
}

func (o ListenerArrayOutput) Index(i pulumi.IntInput) ListenerOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *Listener {
		return vs[0].([]*Listener)[vs[1].(int)]
	}).(ListenerOutput)
}

type ListenerMapOutput struct{ *pulumi.OutputState }

func (ListenerMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*Listener)(nil)).Elem()
}

func (o ListenerMapOutput) ToListenerMapOutput() ListenerMapOutput {
	return o
}

func (o ListenerMapOutput) ToListenerMapOutputWithContext(ctx context.Context) ListenerMapOutput {
	return o
}

func (o ListenerMapOutput) MapIndex(k pulumi.StringInput) ListenerOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *Listener {
		return vs[0].(map[string]*Listener)[vs[1].(string)]
	}).(ListenerOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*ListenerInput)(nil)).Elem(), &Listener{})
	pulumi.RegisterInputType(reflect.TypeOf((*ListenerArrayInput)(nil)).Elem(), ListenerArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*ListenerMapInput)(nil)).Elem(), ListenerMap{})
	pulumi.RegisterOutputType(ListenerOutput{})
	pulumi.RegisterOutputType(ListenerArrayOutput{})
	pulumi.RegisterOutputType(ListenerMapOutput{})
}
